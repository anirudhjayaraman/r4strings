<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Handling Strings with R</title>
  <meta name="description" content="This book aims to provide a panoramic perspective of the wide array of string manipulations that you can perform with R. If you are new to R, or lack experience working with character data, this book will help you get started with the basics of handling strings. Likewise, if you are already familiar with R, you will find material that shows you how to do more advanced string and text processing operations.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Handling Strings with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://gastonsanchez.com/r4strings/" />
  
  <meta property="og:description" content="This book aims to provide a panoramic perspective of the wide array of string manipulations that you can perform with R. If you are new to R, or lack experience working with character data, this book will help you get started with the basics of handling strings. Likewise, if you are already familiar with R, you will find material that shows you how to do more advanced string and text processing operations." />
  <meta name="github-repo" content="gastonstat/r4strings" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Handling Strings with R" />
  
  <meta name="twitter:description" content="This book aims to provide a panoramic perspective of the wide array of string manipulations that you can perform with R. If you are new to R, or lack experience working with character data, this book will help you get started with the basics of handling strings. Likewise, if you are already familiar with R, you will find material that shows you how to do more advanced string and text processing operations." />
  

<meta name="author" content="Gaston Sanchez">


<meta name="date" content="2019-02-17">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="html.html">
<link rel="next" href="logs.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handling Strings with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#give-now"><i class="fa fa-check"></i>Give Now</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#about-this-book"><i class="fa fa-check"></i><b>1.1</b> About this book</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#structure-of-the-book"><i class="fa fa-check"></i><b>1.1.1</b> Structure of the book</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#main-resources"><i class="fa fa-check"></i><b>1.1.2</b> Main Resources</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#acknowledgements"><i class="fa fa-check"></i><b>1.1.3</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.1.4" data-path="intro.html"><a href="intro.html#colophon"><i class="fa fa-check"></i><b>1.1.4</b> Colophon</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Characters</b></span></li>
<li class="chapter" data-level="2" data-path="chars.html"><a href="chars.html"><i class="fa fa-check"></i><b>2</b> Character Strings in R</a><ul>
<li class="chapter" data-level="2.1" data-path="chars.html"><a href="chars.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="chars.html"><a href="chars.html#common-use-of-strings-in-r"><i class="fa fa-check"></i><b>2.2</b> Common use of strings in R</a></li>
<li class="chapter" data-level="2.3" data-path="chars.html"><a href="chars.html#creating-character-strings"><i class="fa fa-check"></i><b>2.3</b> Creating Character Strings</a><ul>
<li class="chapter" data-level="2.3.1" data-path="chars.html"><a href="chars.html#empty-string"><i class="fa fa-check"></i><b>2.3.1</b> Empty string</a></li>
<li class="chapter" data-level="2.3.2" data-path="chars.html"><a href="chars.html#empty-character-vector"><i class="fa fa-check"></i><b>2.3.2</b> Empty character vector</a></li>
<li class="chapter" data-level="2.3.3" data-path="chars.html"><a href="chars.html#function-c"><i class="fa fa-check"></i><b>2.3.3</b> Function <code>c()</code></a></li>
<li class="chapter" data-level="2.3.4" data-path="chars.html"><a href="chars.html#is.character-and-as.character"><i class="fa fa-check"></i><b>2.3.4</b> <code>is.character()</code> and <code>as.character()</code></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="chars.html"><a href="chars.html#behavior-of-r-objects-with-character-strings"><i class="fa fa-check"></i><b>2.4</b> Behavior of R objects with character strings</a></li>
<li class="chapter" data-level="2.5" data-path="chars.html"><a href="chars.html#the-workhorse-function-paste"><i class="fa fa-check"></i><b>2.5</b> The workhorse function <code>paste()</code></a></li>
<li class="chapter" data-level="2.6" data-path="chars.html"><a href="chars.html#exercises"><i class="fa fa-check"></i><b>2.6</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Formatting</b></span></li>
<li class="chapter" data-level="3" data-path="formatting.html"><a href="formatting.html"><i class="fa fa-check"></i><b>3</b> Formatting Text and Numbers</a><ul>
<li class="chapter" data-level="3.1" data-path="formatting.html"><a href="formatting.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="formatting.html"><a href="formatting.html#printing-and-formatting"><i class="fa fa-check"></i><b>3.2</b> Printing and formatting</a></li>
<li class="chapter" data-level="3.3" data-path="formatting.html"><a href="formatting.html#generic-printing"><i class="fa fa-check"></i><b>3.3</b> Generic printing</a><ul>
<li class="chapter" data-level="3.3.1" data-path="formatting.html"><a href="formatting.html#when-to-use-print"><i class="fa fa-check"></i><b>3.3.1</b> When to use <code>print()</code>?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="formatting.html"><a href="formatting.html#concatenate-and-print-with-cat"><i class="fa fa-check"></i><b>3.4</b> Concatenate and print with <code>cat()</code></a></li>
<li class="chapter" data-level="3.5" data-path="formatting.html"><a href="formatting.html#encoding-strings-with-format"><i class="fa fa-check"></i><b>3.5</b> Encoding strings with <code>format()</code></a></li>
<li class="chapter" data-level="3.6" data-path="formatting.html"><a href="formatting.html#exercises-1"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="c-style-formatting.html"><a href="c-style-formatting.html"><i class="fa fa-check"></i><b>4</b> C-style Formatting</a><ul>
<li class="chapter" data-level="4.1" data-path="c-style-formatting.html"><a href="c-style-formatting.html#c-style-formatting-options"><i class="fa fa-check"></i><b>4.1</b> C-style formatting options</a><ul>
<li class="chapter" data-level="4.1.1" data-path="c-style-formatting.html"><a href="c-style-formatting.html#format-slot-syntax"><i class="fa fa-check"></i><b>4.1.1</b> Format Slot Syntax</a></li>
<li class="chapter" data-level="4.1.2" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-basic-sprintf"><i class="fa fa-check"></i><b>4.1.2</b> Example: basic <code>sprintf()</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-file-names"><i class="fa fa-check"></i><b>4.1.3</b> Example: File Names</a></li>
<li class="chapter" data-level="4.1.4" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-fahrenheit-to-celsius"><i class="fa fa-check"></i><b>4.1.4</b> Example: Fahrenheit to Celsius</a></li>
<li class="chapter" data-level="4.1.5" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-car-traveled-distance"><i class="fa fa-check"></i><b>4.1.5</b> Example: Car Traveled Distance</a></li>
<li class="chapter" data-level="4.1.6" data-path="c-style-formatting.html"><a href="c-style-formatting.html#example-coffee-prices"><i class="fa fa-check"></i><b>4.1.6</b> Example: Coffee Prices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="input-and-output.html"><a href="input-and-output.html"><i class="fa fa-check"></i><b>5</b> Input and Output</a><ul>
<li class="chapter" data-level="5.1" data-path="input-and-output.html"><a href="input-and-output.html#output"><i class="fa fa-check"></i><b>5.1</b> Output</a><ul>
<li class="chapter" data-level="5.1.1" data-path="input-and-output.html"><a href="input-and-output.html#concatenating-output"><i class="fa fa-check"></i><b>5.1.1</b> Concatenating output</a></li>
<li class="chapter" data-level="5.1.2" data-path="input-and-output.html"><a href="input-and-output.html#sinking-output"><i class="fa fa-check"></i><b>5.1.2</b> Sinking output</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="input-and-output.html"><a href="input-and-output.html#exporting-tables"><i class="fa fa-check"></i><b>5.2</b> Exporting tables</a></li>
</ul></li>
<li class="part"><span><b>III Manipulations</b></span></li>
<li class="chapter" data-level="6" data-path="manip.html"><a href="manip.html"><i class="fa fa-check"></i><b>6</b> Basic String Manipulations</a><ul>
<li class="chapter" data-level="6.1" data-path="manip.html"><a href="manip.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="manip.html"><a href="manip.html#basic-manipulations"><i class="fa fa-check"></i><b>6.2</b> Basic Manipulations</a></li>
<li class="chapter" data-level="6.3" data-path="manip.html"><a href="manip.html#counting-characters"><i class="fa fa-check"></i><b>6.3</b> Counting characters</a></li>
<li class="chapter" data-level="6.4" data-path="manip.html"><a href="manip.html#casefolding"><i class="fa fa-check"></i><b>6.4</b> Casefolding</a></li>
<li class="chapter" data-level="6.5" data-path="manip.html"><a href="manip.html#translating-characters"><i class="fa fa-check"></i><b>6.5</b> Translating characters</a></li>
<li class="chapter" data-level="6.6" data-path="manip.html"><a href="manip.html#abbreviating-strings"><i class="fa fa-check"></i><b>6.6</b> Abbreviating strings</a></li>
<li class="chapter" data-level="6.7" data-path="manip.html"><a href="manip.html#replacing-strings"><i class="fa fa-check"></i><b>6.7</b> Replacing strings</a></li>
<li class="chapter" data-level="6.8" data-path="manip.html"><a href="manip.html#set-operations"><i class="fa fa-check"></i><b>6.8</b> Set Operations</a><ul>
<li class="chapter" data-level="6.8.1" data-path="manip.html"><a href="manip.html#set-union-with-union"><i class="fa fa-check"></i><b>6.8.1</b> Set union with <code>union()</code></a></li>
<li class="chapter" data-level="6.8.2" data-path="manip.html"><a href="manip.html#set-intersection-with-intersect"><i class="fa fa-check"></i><b>6.8.2</b> Set intersection with <code>intersect()</code></a></li>
<li class="chapter" data-level="6.8.3" data-path="manip.html"><a href="manip.html#set-difference-with-setdiff"><i class="fa fa-check"></i><b>6.8.3</b> Set difference with <code>setdiff()</code></a></li>
<li class="chapter" data-level="6.8.4" data-path="manip.html"><a href="manip.html#set-equality-with-setequal"><i class="fa fa-check"></i><b>6.8.4</b> Set equality with <code>setequal()</code></a></li>
<li class="chapter" data-level="6.8.5" data-path="manip.html"><a href="manip.html#exact-equality-with-identical"><i class="fa fa-check"></i><b>6.8.5</b> Exact equality with <code>identical()</code></a></li>
<li class="chapter" data-level="6.8.6" data-path="manip.html"><a href="manip.html#element-contained-with-is.element"><i class="fa fa-check"></i><b>6.8.6</b> Element contained with <code>is.element()</code></a></li>
<li class="chapter" data-level="6.8.7" data-path="manip.html"><a href="manip.html#sorting-with-sort"><i class="fa fa-check"></i><b>6.8.7</b> Sorting with <code>sort()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stringr-basics.html"><a href="stringr-basics.html"><i class="fa fa-check"></i><b>7</b> Stringr Basics</a><ul>
<li class="chapter" data-level="7.1" data-path="stringr-basics.html"><a href="stringr-basics.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="stringr-basics.html"><a href="stringr-basics.html#package-stringr"><i class="fa fa-check"></i><b>7.2</b> Package <code>stringr</code></a></li>
<li class="chapter" data-level="7.3" data-path="stringr-basics.html"><a href="stringr-basics.html#basic-string-operations"><i class="fa fa-check"></i><b>7.3</b> Basic String Operations</a><ul>
<li class="chapter" data-level="7.3.1" data-path="stringr-basics.html"><a href="stringr-basics.html#concatenating-with-str_c"><i class="fa fa-check"></i><b>7.3.1</b> Concatenating with <code>str_c()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="stringr-basics.html"><a href="stringr-basics.html#number-of-characters-with-str_length"><i class="fa fa-check"></i><b>7.3.2</b> Number of characters with <code>str_length()</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="stringr-basics.html"><a href="stringr-basics.html#substring-with-str_sub"><i class="fa fa-check"></i><b>7.3.3</b> Substring with <code>str_sub()</code></a></li>
<li class="chapter" data-level="7.3.4" data-path="stringr-basics.html"><a href="stringr-basics.html#duplication-with-str_dup"><i class="fa fa-check"></i><b>7.3.4</b> Duplication with <code>str_dup()</code></a></li>
<li class="chapter" data-level="7.3.5" data-path="stringr-basics.html"><a href="stringr-basics.html#padding-with-str_pad"><i class="fa fa-check"></i><b>7.3.5</b> Padding with <code>str_pad()</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="stringr-basics.html"><a href="stringr-basics.html#wrapping-with-str_wrap"><i class="fa fa-check"></i><b>7.3.6</b> Wrapping with <code>str_wrap()</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="stringr-basics.html"><a href="stringr-basics.html#trimming-with-str_trim"><i class="fa fa-check"></i><b>7.3.7</b> Trimming with <code>str_trim()</code></a></li>
<li class="chapter" data-level="7.3.8" data-path="stringr-basics.html"><a href="stringr-basics.html#word-extraction-with-word"><i class="fa fa-check"></i><b>7.3.8</b> Word extraction with <code>word()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html"><i class="fa fa-check"></i><b>8</b> Basic Manipulation Examples</a><ul>
<li class="chapter" data-level="8.1" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#introduction-4"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-names-of-files"><i class="fa fa-check"></i><b>8.1.1</b> Example: Names of files</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-valid-color-names"><i class="fa fa-check"></i><b>8.1.2</b> Example: Valid Color Names</a></li>
<li class="chapter" data-level="8.1.3" data-path="basic-manipulation-examples.html"><a href="basic-manipulation-examples.html#example-me-and-you-plot"><i class="fa fa-check"></i><b>8.1.3</b> Example: Me and You plot</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Regex</b></span></li>
<li class="chapter" data-level="9" data-path="regex1.html"><a href="regex1.html"><i class="fa fa-check"></i><b>9</b> Regular Expressions</a><ul>
<li class="chapter" data-level="9.1" data-path="regex1.html"><a href="regex1.html#introduction-5"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="regex1.html"><a href="regex1.html#what-are-regular-expressions"><i class="fa fa-check"></i><b>9.2</b> What are Regular Expressions?</a><ul>
<li class="chapter" data-level="9.2.1" data-path="regex1.html"><a href="regex1.html#what-are-regular-expressions-used-for"><i class="fa fa-check"></i><b>9.2.1</b> What are Regular Expressions used for?</a></li>
<li class="chapter" data-level="9.2.2" data-path="regex1.html"><a href="regex1.html#a-word-of-caution-about-regex"><i class="fa fa-check"></i><b>9.2.2</b> A word of caution about regex</a></li>
<li class="chapter" data-level="9.2.3" data-path="regex1.html"><a href="regex1.html#regular-expressions-in-r"><i class="fa fa-check"></i><b>9.2.3</b> Regular Expressions in R</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regex1.html"><a href="regex1.html#regex-basics"><i class="fa fa-check"></i><b>9.3</b> Regex Basics</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="literal.html"><a href="literal.html"><i class="fa fa-check"></i><b>10</b> Literal Characters</a><ul>
<li class="chapter" data-level="10.1" data-path="literal.html"><a href="literal.html#matching-literal-characters"><i class="fa fa-check"></i><b>10.1</b> Matching Literal Characters</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="metacharacters.html"><a href="metacharacters.html"><i class="fa fa-check"></i><b>11</b> Metacharacters</a><ul>
<li class="chapter" data-level="11.1" data-path="metacharacters.html"><a href="metacharacters.html#about-metacharacters"><i class="fa fa-check"></i><b>11.1</b> About Metacharacters</a></li>
<li class="chapter" data-level="11.2" data-path="metacharacters.html"><a href="metacharacters.html#the-wild-metacharacter"><i class="fa fa-check"></i><b>11.2</b> The Wild Metacharacter</a></li>
<li class="chapter" data-level="11.3" data-path="metacharacters.html"><a href="metacharacters.html#escaping-metacharacters"><i class="fa fa-check"></i><b>11.3</b> Escaping metacharacters</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="character-sets.html"><a href="character-sets.html"><i class="fa fa-check"></i><b>12</b> Character Sets</a><ul>
<li class="chapter" data-level="12.1" data-path="character-sets.html"><a href="character-sets.html#defining-character-sets"><i class="fa fa-check"></i><b>12.1</b> Defining character sets</a></li>
<li class="chapter" data-level="12.2" data-path="character-sets.html"><a href="character-sets.html#character-ranges"><i class="fa fa-check"></i><b>12.2</b> Character ranges</a></li>
<li class="chapter" data-level="12.3" data-path="character-sets.html"><a href="character-sets.html#negative-character-sets"><i class="fa fa-check"></i><b>12.3</b> Negative Character Sets</a></li>
<li class="chapter" data-level="12.4" data-path="character-sets.html"><a href="character-sets.html#metacharacters-inside-character-sets"><i class="fa fa-check"></i><b>12.4</b> Metacharacters inside character sets</a></li>
<li class="chapter" data-level="12.5" data-path="character-sets.html"><a href="character-sets.html#character-classes"><i class="fa fa-check"></i><b>12.5</b> Character Classes</a></li>
<li class="chapter" data-level="12.6" data-path="character-sets.html"><a href="character-sets.html#posix-character-classes"><i class="fa fa-check"></i><b>12.6</b> POSIX Character Classes</a></li>
</ul></li>
<li class="part"><span><b>V Applications</b></span></li>
<li class="chapter" data-level="13" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>13</b> Practical Applications</a><ul>
<li class="chapter" data-level="13.1" data-path="applications.html"><a href="applications.html#introduction-6"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="reversing.html"><a href="reversing.html"><i class="fa fa-check"></i><b>14</b> Reversing Strings</a><ul>
<li class="chapter" data-level="14.1" data-path="reversing.html"><a href="reversing.html#introduction-7"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="reversing.html"><a href="reversing.html#reversing-characters"><i class="fa fa-check"></i><b>14.2</b> Reversing Characters</a></li>
<li class="chapter" data-level="14.3" data-path="reversing.html"><a href="reversing.html#reversing-words"><i class="fa fa-check"></i><b>14.3</b> Reversing Words</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>15</b> Matching HTML Tags</a><ul>
<li class="chapter" data-level="15.1" data-path="html.html"><a href="html.html#introduction-8"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="html.html"><a href="html.html#attributes-href"><i class="fa fa-check"></i><b>15.2</b> Attributes <code>href</code></a><ul>
<li class="chapter" data-level="15.2.1" data-path="html.html"><a href="html.html#getting-sig-links"><i class="fa fa-check"></i><b>15.2.1</b> Getting SIG links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>16</b> Data Cleaning</a><ul>
<li class="chapter" data-level="16.1" data-path="cleaning.html"><a href="cleaning.html#introduction-9"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="cleaning.html"><a href="cleaning.html#import-data"><i class="fa fa-check"></i><b>16.2</b> Import Data</a></li>
<li class="chapter" data-level="16.3" data-path="cleaning.html"><a href="cleaning.html#extracting-meters"><i class="fa fa-check"></i><b>16.3</b> Extracting Meters</a></li>
<li class="chapter" data-level="16.4" data-path="cleaning.html"><a href="cleaning.html#extracting-country"><i class="fa fa-check"></i><b>16.4</b> Extracting Country</a></li>
<li class="chapter" data-level="16.5" data-path="cleaning.html"><a href="cleaning.html#cleaning-dates"><i class="fa fa-check"></i><b>16.5</b> Cleaning Dates</a></li>
<li class="chapter" data-level="16.6" data-path="cleaning.html"><a href="cleaning.html#month-and-day"><i class="fa fa-check"></i><b>16.6</b> Month and Day</a></li>
<li class="chapter" data-level="16.7" data-path="cleaning.html"><a href="cleaning.html#extracting-year"><i class="fa fa-check"></i><b>16.7</b> Extracting Year</a><ul>
<li class="chapter" data-level="16.7.1" data-path="cleaning.html"><a href="cleaning.html#athletes-name"><i class="fa fa-check"></i><b>16.7.1</b> Athlete’s Name</a></li>
</ul></li>
<li class="chapter" data-level="16.8" data-path="cleaning.html"><a href="cleaning.html#athlete-names"><i class="fa fa-check"></i><b>16.8</b> Athlete Names</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="logs.html"><a href="logs.html"><i class="fa fa-check"></i><b>17</b> Data Log File</a><ul>
<li class="chapter" data-level="17.1" data-path="logs.html"><a href="logs.html#reading-the-text-file"><i class="fa fa-check"></i><b>17.1</b> Reading the text file</a><ul>
<li class="chapter" data-level="17.1.1" data-path="logs.html"><a href="logs.html#jpg-file-requests"><i class="fa fa-check"></i><b>17.1.1</b> JPG File Requests</a></li>
<li class="chapter" data-level="17.1.2" data-path="logs.html"><a href="logs.html#extracting-file-extensions"><i class="fa fa-check"></i><b>17.1.2</b> Extracting file extensions</a></li>
<li class="chapter" data-level="17.1.3" data-path="logs.html"><a href="logs.html#image-files"><i class="fa fa-check"></i><b>17.1.3</b> Image files</a></li>
<li class="chapter" data-level="17.1.4" data-path="logs.html"><a href="logs.html#how-to-match-image-files-with-one-regex-pattern"><i class="fa fa-check"></i><b>17.1.4</b> How to match image files with one regex pattern?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="biomed.html"><a href="biomed.html"><i class="fa fa-check"></i><b>18</b> BMC Journals Data</a><ul>
<li class="chapter" data-level="18.1" data-path="biomed.html"><a href="biomed.html#introduction-10"><i class="fa fa-check"></i><b>18.1</b> Introduction</a></li>
<li class="chapter" data-level="18.2" data-path="biomed.html"><a href="biomed.html#analyzing-journal-names"><i class="fa fa-check"></i><b>18.2</b> Analyzing Journal Names</a><ul>
<li class="chapter" data-level="18.2.1" data-path="biomed.html"><a href="biomed.html#preprocessing"><i class="fa fa-check"></i><b>18.2.1</b> Preprocessing</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="biomed.html"><a href="biomed.html#summary-statistics"><i class="fa fa-check"></i><b>18.3</b> Summary statistics</a></li>
<li class="chapter" data-level="18.4" data-path="biomed.html"><a href="biomed.html#common-words"><i class="fa fa-check"></i><b>18.4</b> Common words</a></li>
<li class="chapter" data-level="18.5" data-path="biomed.html"><a href="biomed.html#the-top-30-words"><i class="fa fa-check"></i><b>18.5</b> The top 30 words</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handling Strings with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cleaning" class="section level1">
<h1><span class="header-section-number">16</span> Data Cleaning</h1>
<div id="introduction-9" class="section level2">
<h2><span class="header-section-number">16.1</span> Introduction</h2>
<p>In this application we are going to work with the Men’s Long Jump World Record Progression data from wikipedia (see screenshot below).</p>
<p><a href="https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression#Low_altitude_record_progression_1965%E2%80%931991">https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression#Low_altitude_record_progression_1965%E2%80%931991</a></p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-105"></span>
<img src="images/men-long-jump.png" alt="Men's Long Jump World Record Progression" width="745" />
<p class="caption">
Figure 16.1: Men’s Long Jump World Record Progression
</p>
</div>
</div>
<div id="import-data" class="section level2">
<h2><span class="header-section-number">16.2</span> Import Data</h2>
<p>To import the data of the Record Progression table you can use a couple of functions from the package <code>rvest</code>.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" data-line-number="1"><span class="kw">library</span>(rvest)</a>
<a class="sourceLine" id="cb234-2" data-line-number="2"></a>
<a class="sourceLine" id="cb234-3" data-line-number="3">wiki_jump &lt;-<span class="st"> &#39;https://en.wikipedia.org/wiki/Men%27s_long_jump_world_record_progression&#39;</span></a>
<a class="sourceLine" id="cb234-4" data-line-number="4"></a>
<a class="sourceLine" id="cb234-5" data-line-number="5">long_jump &lt;-<span class="st"> </span><span class="kw">read_html</span>(wiki_jump)</a>
<a class="sourceLine" id="cb234-6" data-line-number="6">tbl &lt;-<span class="st"> </span><span class="kw">html_table</span>(<span class="kw">html_node</span>(long_jump, <span class="st">&#39;table&#39;</span>))</a></code></pre></div>
<p>The function <code>read_html()</code> reads the html file of the wikipedia page. This will produce an object of type <code>&quot;xml_document&quot;</code> which we can further manipulate with other functions in <code>&quot;rvest&quot;</code>.</p>
<p>Because the <em>Record progression</em> data is in an html <code>table</code> node, you can use <code>html_node()</code> to locate such table in the XML document. And then <em>extract</em> it with <code>html_table()</code>.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1"><span class="kw">str</span>(tbl, <span class="dt">vec.len =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb235-2" data-line-number="2"><span class="co">#&gt; &#39;data.frame&#39;:    18 obs. of  5 variables:</span></a>
<a class="sourceLine" id="cb235-3" data-line-number="3"><span class="co">#&gt;  $ Mark   : chr  &quot;7.61 m (24 ft 11 1⁄2 in)&quot; ...</span></a>
<a class="sourceLine" id="cb235-4" data-line-number="4"><span class="co">#&gt;  $ Wind   : num  NA NA ...</span></a>
<a class="sourceLine" id="cb235-5" data-line-number="5"><span class="co">#&gt;  $ Athlete: chr  &quot;Peter O&#39;Connor (IRE)&quot; ...</span></a>
<a class="sourceLine" id="cb235-6" data-line-number="6"><span class="co">#&gt;  $ Venue  : chr  &quot;Dublin, Ireland&quot; ...</span></a>
<a class="sourceLine" id="cb235-7" data-line-number="7"><span class="co">#&gt;  $ Date   : chr  &quot;5 August 1901[1]&quot; ...</span></a></code></pre></div>
<p>As you can tell, the extracted table <code>tbl</code> is a data frame with 18 rows and 5 columns.</p>
</div>
<div id="extracting-meters" class="section level2">
<h2><span class="header-section-number">16.3</span> Extracting Meters</h2>
<p>The first task consists of looking at the values in column <code>Mark</code>, and find how to retrieve the distance values expressed in meters. For example, the first element in <code>Mark</code> is:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1">tbl<span class="op">$</span>Mark[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb236-2" data-line-number="2"><span class="co">#&gt; [1] &quot;7.61 m (24 ft 11 1⁄2 in)&quot;</span></a></code></pre></div>
<p>The goal is to obtain the number <code>7.61</code>. One way to achieve this task is via the <code>substr()</code> function.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1"><span class="kw">substr</span>(tbl<span class="op">$</span>Mark[<span class="dv">1</span>], <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">stop =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb237-2" data-line-number="2"><span class="co">#&gt; [1] &quot;7.61&quot;</span></a></code></pre></div>
<p>We can do that for the entire vector:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1">meters &lt;-<span class="st"> </span><span class="kw">substr</span>(tbl<span class="op">$</span>Mark, <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">stop =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb238-2" data-line-number="2">meters</a>
<a class="sourceLine" id="cb238-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;7.61&quot; &quot;7.69&quot; &quot;7.76&quot; &quot;7.89&quot; &quot;7.90&quot; &quot;7.93&quot; &quot;7.98&quot; &quot;8.13&quot; &quot;8.21&quot; &quot;8.24&quot;</span></a>
<a class="sourceLine" id="cb238-4" data-line-number="4"><span class="co">#&gt; [11] &quot;8.28&quot; &quot;8.31&quot; &quot;8.31&quot; &quot;8.34&quot; &quot;8.35&quot; &quot;8.35&quot; &quot;8.90&quot; &quot;8.95&quot;</span></a></code></pre></div>
<p>Notice that the meter values are not really numeric but character. In order to have <code>meters</code> as numbers, we should coerce them with <code>as.numeric()</code></p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1">meters &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">substr</span>(tbl<span class="op">$</span>Mark, <span class="dt">start =</span> <span class="dv">1</span>, <span class="dt">stop =</span> <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb239-2" data-line-number="2">meters</a>
<a class="sourceLine" id="cb239-3" data-line-number="3"><span class="co">#&gt;  [1] 7.61 7.69 7.76 7.89 7.90 7.93 7.98 8.13 8.21 8.24 8.28 8.31 8.31 8.34</span></a>
<a class="sourceLine" id="cb239-4" data-line-number="4"><span class="co">#&gt; [15] 8.35 8.35 8.90 8.95</span></a></code></pre></div>
<div id="extracting-meters-with-regular-expressions" class="section level4 unnumbered">
<h4>Extracting Meters with Regular Expressions</h4>
<p>Instead of using the function <code>substr()</code> to obtain the distance values, let’s see how to achieve the same task using regular expressions. To do this we must determine a pattern to be matched. So, what is the pattern that all the distance values (in meters) have in common?</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" data-line-number="1">mark1 &lt;-<span class="st"> </span>tbl<span class="op">$</span>Mark[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb240-2" data-line-number="2">mark1</a>
<a class="sourceLine" id="cb240-3" data-line-number="3"><span class="co">#&gt; [1] &quot;7.61 m (24 ft 11 1⁄2 in)&quot;</span></a></code></pre></div>
<p>If you look at the <code>Mark</code> content, you will notice that the target pattern is formed by: a digit, followed by a dot, followed by two digits. Such pattern can be codified as: <code>&quot;[0-9]\\.[0-9][0-9]&quot;</code>. So let’s test it and see if there’s match:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="kw">str_detect</span>(mark1, <span class="dt">pattern =</span> <span class="st">&quot;[0-9]</span><span class="ch">\\</span><span class="st">.[0-9][0-9]&quot;</span>)</a>
<a class="sourceLine" id="cb241-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>To extract the distance pattern we use <code>str_extract()</code></p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="kw">str_extract</span>(mark1, <span class="dt">pattern =</span> <span class="st">&quot;[0-9]</span><span class="ch">\\</span><span class="st">.[0-9][0-9]&quot;</span>)</a>
<a class="sourceLine" id="cb242-2" data-line-number="2"><span class="co">#&gt; [1] &quot;7.61&quot;</span></a></code></pre></div>
<p>And then we can apply it on the entire column to get:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Mark, <span class="dt">pattern =</span> <span class="st">&quot;[0-9]</span><span class="ch">\\</span><span class="st">.[0-9][0-9]&quot;</span>)</a>
<a class="sourceLine" id="cb243-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;7.61&quot; &quot;7.69&quot; &quot;7.76&quot; &quot;7.89&quot; &quot;7.90&quot; &quot;7.93&quot; &quot;7.98&quot; &quot;8.13&quot; &quot;8.21&quot; &quot;8.24&quot;</span></a>
<a class="sourceLine" id="cb243-3" data-line-number="3"><span class="co">#&gt; [11] &quot;8.28&quot; &quot;8.31&quot; &quot;8.31&quot; &quot;8.34&quot; &quot;8.35&quot; &quot;8.35&quot; &quot;8.90&quot; &quot;8.95&quot;</span></a></code></pre></div>
</div>
</div>
<div id="extracting-country" class="section level2">
<h2><span class="header-section-number">16.4</span> Extracting Country</h2>
<p>Consider the column <code>Athlete</code>. The first value corresponds to <code>Petter O'Connor</code> from Ireland.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1">tbl<span class="op">$</span>Athlete[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb244-2" data-line-number="2"><span class="co">#&gt; [1] &quot;Peter O&#39;Connor (IRE)&quot;</span></a></code></pre></div>
<p>Let’s create a vector <code>peter</code> for this athlete:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1">peter &lt;-<span class="st"> </span>tbl<span class="op">$</span>Athlete[<span class="dv">1</span>]</a></code></pre></div>
<p>How can we get the country abbreviation?</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1"><span class="kw">substr</span>(peter, <span class="kw">nchar</span>(peter)<span class="op">-</span><span class="dv">4</span>, <span class="kw">nchar</span>(peter))</a>
<a class="sourceLine" id="cb246-2" data-line-number="2"><span class="co">#&gt; [1] &quot;(IRE)&quot;</span></a></code></pre></div>
<p>That works but it is preferable to exclude the parentheses, that is, the third to last character, as well as the last character:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="kw">substr</span>(peter, <span class="kw">nchar</span>(peter)<span class="op">-</span><span class="dv">3</span>, <span class="kw">nchar</span>(peter)<span class="op">-</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="co">#&gt; [1] &quot;IRE&quot;</span></a></code></pre></div>
<p>Now we can apply the <code>substr()</code> command with all the athletes:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="co"># extract country</span></a>
<a class="sourceLine" id="cb248-2" data-line-number="2"><span class="kw">substr</span>(tbl<span class="op">$</span>Athlete, <span class="kw">nchar</span>(tbl<span class="op">$</span>Athlete)<span class="op">-</span><span class="dv">4</span>, <span class="kw">nchar</span>(tbl<span class="op">$</span>Athlete))</a>
<a class="sourceLine" id="cb248-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;(IRE)&quot; &quot;(USA)&quot; &quot;(USA)&quot; &quot;(USA)&quot; &quot;(USA)&quot; &quot;(HAI)&quot; &quot;(JPN)&quot; &quot;(USA)&quot;</span></a>
<a class="sourceLine" id="cb248-4" data-line-number="4"><span class="co">#&gt;  [9] &quot;(USA)&quot; &quot;(USA)&quot; &quot;(USA)&quot; &quot;(URS)&quot; &quot;(USA)&quot; &quot;(USA)&quot; &quot;(USA)&quot; &quot;(URS)&quot;</span></a>
<a class="sourceLine" id="cb248-5" data-line-number="5"><span class="co">#&gt; [17] &quot;(USA)&quot; &quot;(USA)&quot;</span></a>
<a class="sourceLine" id="cb248-6" data-line-number="6">country &lt;-<span class="st"> </span><span class="kw">substr</span>(tbl<span class="op">$</span>Athlete, <span class="kw">nchar</span>(tbl<span class="op">$</span>Athlete)<span class="op">-</span><span class="dv">3</span>, <span class="kw">nchar</span>(tbl<span class="op">$</span>Athlete)<span class="op">-</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb248-7" data-line-number="7">country</a>
<a class="sourceLine" id="cb248-8" data-line-number="8"><span class="co">#&gt;  [1] &quot;IRE&quot; &quot;USA&quot; &quot;USA&quot; &quot;USA&quot; &quot;USA&quot; &quot;HAI&quot; &quot;JPN&quot; &quot;USA&quot; &quot;USA&quot; &quot;USA&quot; &quot;USA&quot;</span></a>
<a class="sourceLine" id="cb248-9" data-line-number="9"><span class="co">#&gt; [12] &quot;URS&quot; &quot;USA&quot; &quot;USA&quot; &quot;USA&quot; &quot;URS&quot; &quot;USA&quot; &quot;USA&quot;</span></a></code></pre></div>
</div>
<div id="cleaning-dates" class="section level2">
<h2><span class="header-section-number">16.5</span> Cleaning Dates</h2>
<p>Now let’s consider tha values in column <code>Date</code>:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1"><span class="co"># first 5 dates</span></a>
<a class="sourceLine" id="cb249-2" data-line-number="2">tbl<span class="op">$</span>Date[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb249-3" data-line-number="3"><span class="co">#&gt; [1] &quot;5 August 1901[1]&quot; &quot;23 July 1921[1]&quot;  &quot;7 July 1924[1]&quot;  </span></a>
<a class="sourceLine" id="cb249-4" data-line-number="4"><span class="co">#&gt; [4] &quot;13 June 1925[1]&quot;  &quot;7 July 1928[1]&quot;</span></a></code></pre></div>
<p>Notice that all the date values are formed by the day-number, the name of the month, the year, and then the characters <code>[1]</code>. Obviously we don’t need those last three characters <code>[1]</code>.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1">date1 &lt;-<span class="st"> </span>tbl<span class="op">$</span>Date[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb250-2" data-line-number="2">date1</a>
<a class="sourceLine" id="cb250-3" data-line-number="3"><span class="co">#&gt; [1] &quot;5 August 1901[1]&quot;</span></a></code></pre></div>
<p>First let’s see how to match the pattern <code>[1]</code>. Perhaps the first option that an inexperience user would try is:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1"><span class="kw">str_detect</span>(date1, <span class="dt">pattern =</span> <span class="st">&quot;[1]&quot;</span>)</a>
<a class="sourceLine" id="cb251-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>According to <code>str_detect()</code>, there’s is a match, so let’s see what exactly <code>&quot;[1]&quot;</code> is matching:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1"><span class="kw">str_match</span>(date1, <span class="dt">pattern =</span> <span class="st">&quot;[1]&quot;</span>)</a>
<a class="sourceLine" id="cb252-2" data-line-number="2"><span class="co">#&gt;      [,1]</span></a>
<a class="sourceLine" id="cb252-3" data-line-number="3"><span class="co">#&gt; [1,] &quot;1&quot;</span></a></code></pre></div>
<p>Mmmm, not quite right. We are matching the character <code>&quot;1&quot;</code> but not <code>&quot;[1]&quot;</code>. Why? Because brackets are metacharacters. So in order to match brackets <em>as brackets</em> we need to escape them:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="kw">str_match</span>(date1, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">[1</span><span class="ch">\\</span><span class="st">]&quot;</span>)</a>
<a class="sourceLine" id="cb253-2" data-line-number="2"><span class="co">#&gt;      [,1] </span></a>
<a class="sourceLine" id="cb253-3" data-line-number="3"><span class="co">#&gt; [1,] &quot;[1]&quot;</span></a></code></pre></div>
<p>Now we are talking. The next step involves using <code>str_replace()</code> to match the pattern <code>&quot;\\[1\\]&quot;</code> and replace it with an empty string <code>&quot;&quot;</code>:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1"><span class="kw">str_replace</span>(date1, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">[1</span><span class="ch">\\</span><span class="st">]&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb254-2" data-line-number="2"><span class="co">#&gt; [1] &quot;5 August 1901&quot;</span></a></code></pre></div>
<p>Then, we can get an entire vector of clean dates:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1"><span class="co"># clean dates</span></a>
<a class="sourceLine" id="cb255-2" data-line-number="2">dates &lt;-<span class="st"> </span><span class="kw">str_replace</span>(tbl<span class="op">$</span>Date, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">[1</span><span class="ch">\\</span><span class="st">]&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb255-3" data-line-number="3">dates</a>
<a class="sourceLine" id="cb255-4" data-line-number="4"><span class="co">#&gt;  [1] &quot;5 August 1901&quot;     &quot;23 July 1921&quot;      &quot;7 July 1924&quot;      </span></a>
<a class="sourceLine" id="cb255-5" data-line-number="5"><span class="co">#&gt;  [4] &quot;13 June 1925&quot;      &quot;7 July 1928&quot;       &quot;9 September 1928&quot; </span></a>
<a class="sourceLine" id="cb255-6" data-line-number="6"><span class="co">#&gt;  [7] &quot;27 October 1931&quot;   &quot;25 May 1935&quot;       &quot;12 August 1960&quot;   </span></a>
<a class="sourceLine" id="cb255-7" data-line-number="7"><span class="co">#&gt; [10] &quot;27 May 1961&quot;       &quot;16 July 1961&quot;      &quot;10 June 1962&quot;     </span></a>
<a class="sourceLine" id="cb255-8" data-line-number="8"><span class="co">#&gt; [13] &quot;15 August 1964&quot;    &quot;12 September 1964&quot; &quot;29 May 1965&quot;      </span></a>
<a class="sourceLine" id="cb255-9" data-line-number="9"><span class="co">#&gt; [16] &quot;19 October 1967&quot;   &quot;18 October 1968&quot;   &quot;30 August 1991&quot;</span></a></code></pre></div>
</div>
<div id="month-and-day" class="section level2">
<h2><span class="header-section-number">16.6</span> Month and Day</h2>
<p>We can further manipulate the dates. For example, say we are interested in extracting the name of the month. In the first date, this corresponds to extracting <code>&quot;August&quot;</code>:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1">dates[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb256-2" data-line-number="2"><span class="co">#&gt; [1] &quot;5 August 1901&quot;</span></a></code></pre></div>
<p>How can we do that? Several approaches can be applied in this case. For example, let’s inspect the format of the month names:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" data-line-number="1">dates[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb257-2" data-line-number="2"><span class="co">#&gt; [1] &quot;5 August 1901&quot; &quot;23 July 1921&quot;  &quot;7 July 1924&quot;   &quot;13 June 1925&quot; </span></a>
<a class="sourceLine" id="cb257-3" data-line-number="3"><span class="co">#&gt; [5] &quot;7 July 1928&quot;</span></a></code></pre></div>
<p>They all begin with an upper case letter, followed by the rest of the characters in lower case. If we want to match month names formed by four letters (e.g. June, July), we could look for the pattern <code>&quot;[A-Z][a-z][a-z][a-z]&quot;</code></p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1"><span class="kw">str_extract</span>(dates, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][a-z][a-z]&quot;</span>)</a>
<a class="sourceLine" id="cb258-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;Augu&quot; &quot;July&quot; &quot;July&quot; &quot;June&quot; &quot;July&quot; &quot;Sept&quot; &quot;Octo&quot; NA     &quot;Augu&quot; NA    </span></a>
<a class="sourceLine" id="cb258-3" data-line-number="3"><span class="co">#&gt; [11] &quot;July&quot; &quot;June&quot; &quot;Augu&quot; &quot;Sept&quot; NA     &quot;Octo&quot; &quot;Octo&quot; &quot;Augu&quot;</span></a></code></pre></div>
<p>The previous pattern <code>&quot;[A-Z][a-z][a-z][a-z]&quot;</code> not only matches <code>&quot;June&quot;</code> and <code>&quot;July&quot;</code> but also <code>&quot;Augu&quot;</code>, <code>&quot;Sept&quot;</code>, <code>&quot;Octo&quot;</code>. In addition, we have some missing values.</p>
<p>Because the month names have variable lengths, we can use a repetition or quantifier operator. More specifically, we could look for the pattern <code>&quot;[A-Z][a-z]+&quot;</code>, that is: an upper case letter, followed by a lower case letter, repeated one or more times. The plus <code>+</code> tells the regex engine to attempt to match the preceding token once or more:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1">month_names &lt;-<span class="st"> </span><span class="kw">str_extract</span>(dates, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb259-2" data-line-number="2">month_names</a>
<a class="sourceLine" id="cb259-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;August&quot;    &quot;July&quot;      &quot;July&quot;      &quot;June&quot;      &quot;July&quot;     </span></a>
<a class="sourceLine" id="cb259-4" data-line-number="4"><span class="co">#&gt;  [6] &quot;September&quot; &quot;October&quot;   &quot;May&quot;       &quot;August&quot;    &quot;May&quot;      </span></a>
<a class="sourceLine" id="cb259-5" data-line-number="5"><span class="co">#&gt; [11] &quot;July&quot;      &quot;June&quot;      &quot;August&quot;    &quot;September&quot; &quot;May&quot;      </span></a>
<a class="sourceLine" id="cb259-6" data-line-number="6"><span class="co">#&gt; [16] &quot;October&quot;   &quot;October&quot;   &quot;August&quot;</span></a></code></pre></div>
<p>Having extracted the name of the months, we can take advantage of a similar pattern to extract the days. How? Using a pattern formed by one digit range and the plus sign: <code>&quot;[0-9]+&quot;</code></p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1"><span class="kw">str_extract</span>(dates, <span class="dt">pattern =</span> <span class="st">&quot;[0-9]+&quot;</span>)</a>
<a class="sourceLine" id="cb260-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;5&quot;  &quot;23&quot; &quot;7&quot;  &quot;13&quot; &quot;7&quot;  &quot;9&quot;  &quot;27&quot; &quot;25&quot; &quot;12&quot; &quot;27&quot; &quot;16&quot; &quot;10&quot; &quot;15&quot; &quot;12&quot;</span></a>
<a class="sourceLine" id="cb260-3" data-line-number="3"><span class="co">#&gt; [15] &quot;29&quot; &quot;19&quot; &quot;18&quot; &quot;30&quot;</span></a></code></pre></div>
</div>
<div id="extracting-year" class="section level2">
<h2><span class="header-section-number">16.7</span> Extracting Year</h2>
<p>What about extracting the year number?</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1">dates[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb261-2" data-line-number="2"><span class="co">#&gt; [1] &quot;5 August 1901&quot;</span></a></code></pre></div>
<p>One option that we have discussed already is to use <code>substr()</code> or <code>str_sub()</code></p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1"><span class="kw">str_sub</span>(dates, <span class="dt">start =</span> <span class="kw">nchar</span>(dates)<span class="op">-</span><span class="dv">3</span>, <span class="dt">end =</span> <span class="kw">nchar</span>(dates))</a>
<a class="sourceLine" id="cb262-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;1901&quot; &quot;1921&quot; &quot;1924&quot; &quot;1925&quot; &quot;1928&quot; &quot;1928&quot; &quot;1931&quot; &quot;1935&quot; &quot;1960&quot; &quot;1961&quot;</span></a>
<a class="sourceLine" id="cb262-3" data-line-number="3"><span class="co">#&gt; [11] &quot;1961&quot; &quot;1962&quot; &quot;1964&quot; &quot;1964&quot; &quot;1965&quot; &quot;1967&quot; &quot;1968&quot; &quot;1991&quot;</span></a></code></pre></div>
<p>or simply indicate a negative starting position (to counting from the end of the string):</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1"><span class="kw">str_sub</span>(dates, <span class="dt">start =</span> <span class="dv">-4</span>)</a>
<a class="sourceLine" id="cb263-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;1901&quot; &quot;1921&quot; &quot;1924&quot; &quot;1925&quot; &quot;1928&quot; &quot;1928&quot; &quot;1931&quot; &quot;1935&quot; &quot;1960&quot; &quot;1961&quot;</span></a>
<a class="sourceLine" id="cb263-3" data-line-number="3"><span class="co">#&gt; [11] &quot;1961&quot; &quot;1962&quot; &quot;1964&quot; &quot;1964&quot; &quot;1965&quot; &quot;1967&quot; &quot;1968&quot; &quot;1991&quot;</span></a></code></pre></div>
<p>Another option consists in using a pattern formed by four digits: <code>&quot;[0-9][0-9][0-9][0-9]&quot;</code>:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1"><span class="kw">str_extract</span>(dates[<span class="dv">1</span>], <span class="dt">pattern =</span> <span class="st">&quot;[0-9][0-9][0-9][0-9]&quot;</span>)</a>
<a class="sourceLine" id="cb264-2" data-line-number="2"><span class="co">#&gt; [1] &quot;1901&quot;</span></a></code></pre></div>
<p>An additional option consists in using an <em>end of string anchor</em> with the metacharacter <code>&quot;$&quot;</code> (dollar sign), and combine with a repetition operator <code>&quot;+&quot;</code> like: <code>&quot;[0-9]+$&quot;</code>:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1"><span class="kw">str_extract</span>(dates[<span class="dv">1</span>], <span class="dt">pattern =</span> <span class="st">&quot;[0-9]+$&quot;</span>)</a>
<a class="sourceLine" id="cb265-2" data-line-number="2"><span class="co">#&gt; [1] &quot;1901&quot;</span></a></code></pre></div>
<p>What is this pattern doing? The part of the pattern <code>&quot;[0-9]+&quot;</code> indicates that we want to match one or more digits. In order to tell the engine to match the pattern at the end of the string, we must use the anchor <code>&quot;$&quot;</code>.</p>
<p>The same task can be achieved with a digit character class <code>\\d</code> and the repetition operator <code>+</code>:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1"><span class="kw">str_extract</span>(dates[<span class="dv">1</span>], <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">d+$&quot;</span>)</a>
<a class="sourceLine" id="cb266-2" data-line-number="2"><span class="co">#&gt; [1] &quot;1901&quot;</span></a></code></pre></div>
<div id="athletes-name" class="section level3">
<h3><span class="header-section-number">16.7.1</span> Athlete’s Name</h3>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" data-line-number="1"><span class="co"># First name</span></a>
<a class="sourceLine" id="cb267-2" data-line-number="2"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb267-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;Peter&quot;  &quot;Edward&quot; &quot;Robert&quot; &quot;De&quot;     &quot;Edward&quot; &quot;Sylvio&quot; &quot;Chuhei&quot;</span></a>
<a class="sourceLine" id="cb267-4" data-line-number="4"><span class="co">#&gt;  [8] &quot;Jesse&quot;  &quot;Ralph&quot;  &quot;Ralph&quot;  &quot;Ralph&quot;  &quot;Igor&quot;   &quot;Ralph&quot;  &quot;Ralph&quot; </span></a>
<a class="sourceLine" id="cb267-5" data-line-number="5"><span class="co">#&gt; [15] &quot;Ralph&quot;  &quot;Igor&quot;   &quot;Bob&quot;    &quot;Mike&quot;</span></a></code></pre></div>
<p>The pattern <code>&quot;[A-Z][a-z]+&quot;</code> fails to match the name of the fourth athlete DeHart Hubbard (USA). One way to match an optional upper case in the third position is with the following pattern: <code>&quot;[A-Z][a-z][A-Z]?[a-z]+&quot;</code>:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" data-line-number="1"><span class="co"># First name</span></a>
<a class="sourceLine" id="cb268-2" data-line-number="2"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb268-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;Peter&quot;  &quot;Edward&quot; &quot;Robert&quot; &quot;DeHart&quot; &quot;Edward&quot; &quot;Sylvio&quot; &quot;Chuhei&quot;</span></a>
<a class="sourceLine" id="cb268-4" data-line-number="4"><span class="co">#&gt;  [8] &quot;Jesse&quot;  &quot;Ralph&quot;  &quot;Ralph&quot;  &quot;Ralph&quot;  &quot;Igor&quot;   &quot;Ralph&quot;  &quot;Ralph&quot; </span></a>
<a class="sourceLine" id="cb268-5" data-line-number="5"><span class="co">#&gt; [15] &quot;Ralph&quot;  &quot;Igor&quot;   &quot;Bob&quot;    &quot;Mike&quot;</span></a></code></pre></div>
<p>An alternative option is to use the <em>word</em> character class <code>\\w</code> repeated one or more times: <code>&quot;\\w+&quot;</code></p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb269-1" data-line-number="1"><span class="co"># First name</span></a>
<a class="sourceLine" id="cb269-2" data-line-number="2"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">w+&quot;</span>)</a>
<a class="sourceLine" id="cb269-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;Peter&quot;  &quot;Edward&quot; &quot;Robert&quot; &quot;DeHart&quot; &quot;Edward&quot; &quot;Sylvio&quot; &quot;Chuhei&quot;</span></a>
<a class="sourceLine" id="cb269-4" data-line-number="4"><span class="co">#&gt;  [8] &quot;Jesse&quot;  &quot;Ralph&quot;  &quot;Ralph&quot;  &quot;Ralph&quot;  &quot;Igor&quot;   &quot;Ralph&quot;  &quot;Ralph&quot; </span></a>
<a class="sourceLine" id="cb269-5" data-line-number="5"><span class="co">#&gt; [15] &quot;Ralph&quot;  &quot;Igor&quot;   &quot;Bob&quot;    &quot;Mike&quot;</span></a></code></pre></div>
</div>
</div>
<div id="athlete-names" class="section level2">
<h2><span class="header-section-number">16.8</span> Athlete Names</h2>
<p>Now let’s try to extract the athletes’ first and last names. We could specify a regex pattern for the first name <code>[A-Z][a-z][A-Z]?[a-z]+</code>, followed by a space, followed by an uper case letter, and one or more lower case letters <code>[A-Z][a-z]+</code>:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+ [A-Z][a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb270-2" data-line-number="2"><span class="co">#&gt;  [1] NA               &quot;Edward Gourdin&quot; &quot;Robert Le&quot;      &quot;DeHart Hubbard&quot;</span></a>
<a class="sourceLine" id="cb270-3" data-line-number="3"><span class="co">#&gt;  [5] &quot;Edward Hamm&quot;    &quot;Sylvio Cator&quot;   &quot;Chuhei Nambu&quot;   &quot;Jesse Owens&quot;   </span></a>
<a class="sourceLine" id="cb270-4" data-line-number="4"><span class="co">#&gt;  [9] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter&quot;      </span></a>
<a class="sourceLine" id="cb270-5" data-line-number="5"><span class="co">#&gt; [13] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter&quot;      </span></a>
<a class="sourceLine" id="cb270-6" data-line-number="6"><span class="co">#&gt; [17] &quot;Bob Beamon&quot;     &quot;Mike Powell&quot;</span></a></code></pre></div>
<p>What about the first athlete Peter O’Connor? The previous pattern does not include the apostrophe.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" data-line-number="1"><span class="co"># works for Peter O&#39;Connor only</span></a>
<a class="sourceLine" id="cb271-2" data-line-number="2"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+ [A-Z]&#39;[A-Z][a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb271-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;Peter O&#39;Connor&quot; NA               NA               NA              </span></a>
<a class="sourceLine" id="cb271-4" data-line-number="4"><span class="co">#&gt;  [5] NA               NA               NA               NA              </span></a>
<a class="sourceLine" id="cb271-5" data-line-number="5"><span class="co">#&gt;  [9] NA               NA               NA               NA              </span></a>
<a class="sourceLine" id="cb271-6" data-line-number="6"><span class="co">#&gt; [13] NA               NA               NA               NA              </span></a>
<a class="sourceLine" id="cb271-7" data-line-number="7"><span class="co">#&gt; [17] NA               NA</span></a></code></pre></div>
<p>What about this other pattern?</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb272-1" data-line-number="1"><span class="co"># still only works for Peter O&#39;Connor</span></a>
<a class="sourceLine" id="cb272-2" data-line-number="2"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+ [A-Z]&#39;[A-Z]?[a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb272-3" data-line-number="3"><span class="co">#&gt;  [1] &quot;Peter O&#39;Connor&quot; NA               NA               NA              </span></a>
<a class="sourceLine" id="cb272-4" data-line-number="4"><span class="co">#&gt;  [5] NA               NA               NA               NA              </span></a>
<a class="sourceLine" id="cb272-5" data-line-number="5"><span class="co">#&gt;  [9] NA               NA               NA               NA              </span></a>
<a class="sourceLine" id="cb272-6" data-line-number="6"><span class="co">#&gt; [13] NA               NA               NA               NA              </span></a>
<a class="sourceLine" id="cb272-7" data-line-number="7"><span class="co">#&gt; [17] NA               NA</span></a></code></pre></div>
<p>Recall that the quantifier (or repetition) operators have an effect on the preceding token. So, the pattern <code>&quot;[A-Z]'[A-Z]?[a-z]+&quot;</code> means: an upper case letter, followed by an apostrophe, followed by an optional upper case, followed by one or more lower case letters. In other words, the quantifier <code>&quot;?&quot;</code> only has an effect on the second upper case letter.</p>
<p>In reality, we want both the apostrophe and the second upper case letters to be optional, so we need to add quantifiers <code>&quot;?&quot;</code> to both of them:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+ [A-Z]&#39;?[A-Z]?[a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb273-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;Peter O&#39;Connor&quot; &quot;Edward Gourdin&quot; &quot;Robert Le&quot;      &quot;DeHart Hubbard&quot;</span></a>
<a class="sourceLine" id="cb273-3" data-line-number="3"><span class="co">#&gt;  [5] &quot;Edward Hamm&quot;    &quot;Sylvio Cator&quot;   &quot;Chuhei Nambu&quot;   &quot;Jesse Owens&quot;   </span></a>
<a class="sourceLine" id="cb273-4" data-line-number="4"><span class="co">#&gt;  [9] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter&quot;      </span></a>
<a class="sourceLine" id="cb273-5" data-line-number="5"><span class="co">#&gt; [13] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter&quot;      </span></a>
<a class="sourceLine" id="cb273-6" data-line-number="6"><span class="co">#&gt; [17] &quot;Bob Beamon&quot;     &quot;Mike Powell&quot;</span></a></code></pre></div>
<p>If you want to treat a set of characters as a single unit, you must wrap them inside parentheses:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+ [A-Z](&#39;[A-Z])?[a-z]+&quot;</span>)</a>
<a class="sourceLine" id="cb274-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;Peter O&#39;Connor&quot; &quot;Edward Gourdin&quot; &quot;Robert Le&quot;      &quot;DeHart Hubbard&quot;</span></a>
<a class="sourceLine" id="cb274-3" data-line-number="3"><span class="co">#&gt;  [5] &quot;Edward Hamm&quot;    &quot;Sylvio Cator&quot;   &quot;Chuhei Nambu&quot;   &quot;Jesse Owens&quot;   </span></a>
<a class="sourceLine" id="cb274-4" data-line-number="4"><span class="co">#&gt;  [9] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter&quot;      </span></a>
<a class="sourceLine" id="cb274-5" data-line-number="5"><span class="co">#&gt; [13] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter&quot;      </span></a>
<a class="sourceLine" id="cb274-6" data-line-number="6"><span class="co">#&gt; [17] &quot;Bob Beamon&quot;     &quot;Mike Powell&quot;</span></a></code></pre></div>
<p>We still have an issue with athlete <code>Igor Ter-Ovanesyan</code>. The patterns used so far are only matching the the characters in his last name before the hyphen. We can start by adding a escaped hyphen inside the character set <code>&quot;[a-z\\-]&quot;</code> at the end of the pattern:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+ [A-Z](&#39;[A-Z])?[a-z</span><span class="ch">\\</span><span class="st">-]+&quot;</span>)</a>
<a class="sourceLine" id="cb275-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;Peter O&#39;Connor&quot; &quot;Edward Gourdin&quot; &quot;Robert Le&quot;      &quot;DeHart Hubbard&quot;</span></a>
<a class="sourceLine" id="cb275-3" data-line-number="3"><span class="co">#&gt;  [5] &quot;Edward Hamm&quot;    &quot;Sylvio Cator&quot;   &quot;Chuhei Nambu&quot;   &quot;Jesse Owens&quot;   </span></a>
<a class="sourceLine" id="cb275-4" data-line-number="4"><span class="co">#&gt;  [9] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter-&quot;     </span></a>
<a class="sourceLine" id="cb275-5" data-line-number="5"><span class="co">#&gt; [13] &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Ralph Boston&quot;   &quot;Igor Ter-&quot;     </span></a>
<a class="sourceLine" id="cb275-6" data-line-number="6"><span class="co">#&gt; [17] &quot;Bob Beamon&quot;     &quot;Mike Powell&quot;</span></a></code></pre></div>
<p>Notice that this pattern does match the hyphen but fails to match the second part of the last name (the one after the hyphen). This is because our token is only matching lower case letters. So we also need to include upper case letters in the character set: <code>&quot;[a-zA-Z\\-]&quot;</code></p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;[A-Z][a-z][A-Z]?[a-z]+ [A-Z](&#39;[A-Z])?[a-zA-Z</span><span class="ch">\\</span><span class="st">-]+&quot;</span>)</a>
<a class="sourceLine" id="cb276-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;Peter O&#39;Connor&quot;     &quot;Edward Gourdin&quot;     &quot;Robert LeGendre&quot;   </span></a>
<a class="sourceLine" id="cb276-3" data-line-number="3"><span class="co">#&gt;  [4] &quot;DeHart Hubbard&quot;     &quot;Edward Hamm&quot;        &quot;Sylvio Cator&quot;      </span></a>
<a class="sourceLine" id="cb276-4" data-line-number="4"><span class="co">#&gt;  [7] &quot;Chuhei Nambu&quot;       &quot;Jesse Owens&quot;        &quot;Ralph Boston&quot;      </span></a>
<a class="sourceLine" id="cb276-5" data-line-number="5"><span class="co">#&gt; [10] &quot;Ralph Boston&quot;       &quot;Ralph Boston&quot;       &quot;Igor Ter-Ovanesyan&quot;</span></a>
<a class="sourceLine" id="cb276-6" data-line-number="6"><span class="co">#&gt; [13] &quot;Ralph Boston&quot;       &quot;Ralph Boston&quot;       &quot;Ralph Boston&quot;      </span></a>
<a class="sourceLine" id="cb276-7" data-line-number="7"><span class="co">#&gt; [16] &quot;Igor Ter-Ovanesyan&quot; &quot;Bob Beamon&quot;         &quot;Mike Powell&quot;</span></a></code></pre></div>
<p>The regex patterns that involve a set such as <code>&quot;[a-zA-Z]&quot;</code> can be simplified with a repeated <strong>word</strong> character class <code>&quot;\\w+&quot;</code> (recall that <code>&quot;\\w+&quot;</code> is equivalent to <code>&quot;[0-9A-Za-z_]&quot;</code>). We can try to use two repeated word classes:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">w+ </span><span class="ch">\\</span><span class="st">w+&quot;</span>)</a>
<a class="sourceLine" id="cb277-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;Peter O&quot;         &quot;Edward Gourdin&quot;  &quot;Robert LeGendre&quot;</span></a>
<a class="sourceLine" id="cb277-3" data-line-number="3"><span class="co">#&gt;  [4] &quot;DeHart Hubbard&quot;  &quot;Edward Hamm&quot;     &quot;Sylvio Cator&quot;   </span></a>
<a class="sourceLine" id="cb277-4" data-line-number="4"><span class="co">#&gt;  [7] &quot;Chuhei Nambu&quot;    &quot;Jesse Owens&quot;     &quot;Ralph Boston&quot;   </span></a>
<a class="sourceLine" id="cb277-5" data-line-number="5"><span class="co">#&gt; [10] &quot;Ralph Boston&quot;    &quot;Ralph Boston&quot;    &quot;Igor Ter&quot;       </span></a>
<a class="sourceLine" id="cb277-6" data-line-number="6"><span class="co">#&gt; [13] &quot;Ralph Boston&quot;    &quot;Ralph Boston&quot;    &quot;Ralph Boston&quot;   </span></a>
<a class="sourceLine" id="cb277-7" data-line-number="7"><span class="co">#&gt; [16] &quot;Igor Ter&quot;        &quot;Bob Beamon&quot;      &quot;Mike Powell&quot;</span></a></code></pre></div>
<p>As you know, we also need to include an apostrphe and the hyphen. In this case, we can include them inside parentheses and separating them with the OR operator <code>&quot;|&quot;</code>:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" data-line-number="1"><span class="kw">str_extract</span>(tbl<span class="op">$</span>Athlete, <span class="dt">pattern =</span> <span class="st">&quot;</span><span class="ch">\\</span><span class="st">w+ (</span><span class="ch">\\</span><span class="st">w|-|&#39;)+&quot;</span>)</a>
<a class="sourceLine" id="cb278-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;Peter O&#39;Connor&quot;     &quot;Edward Gourdin&quot;     &quot;Robert LeGendre&quot;   </span></a>
<a class="sourceLine" id="cb278-3" data-line-number="3"><span class="co">#&gt;  [4] &quot;DeHart Hubbard&quot;     &quot;Edward Hamm&quot;        &quot;Sylvio Cator&quot;      </span></a>
<a class="sourceLine" id="cb278-4" data-line-number="4"><span class="co">#&gt;  [7] &quot;Chuhei Nambu&quot;       &quot;Jesse Owens&quot;        &quot;Ralph Boston&quot;      </span></a>
<a class="sourceLine" id="cb278-5" data-line-number="5"><span class="co">#&gt; [10] &quot;Ralph Boston&quot;       &quot;Ralph Boston&quot;       &quot;Igor Ter-Ovanesyan&quot;</span></a>
<a class="sourceLine" id="cb278-6" data-line-number="6"><span class="co">#&gt; [13] &quot;Ralph Boston&quot;       &quot;Ralph Boston&quot;       &quot;Ralph Boston&quot;      </span></a>
<a class="sourceLine" id="cb278-7" data-line-number="7"><span class="co">#&gt; [16] &quot;Igor Ter-Ovanesyan&quot; &quot;Bob Beamon&quot;         &quot;Mike Powell&quot;</span></a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="html.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="logs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/gastonstat/r4strings/edit/master/data-cleaning.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
